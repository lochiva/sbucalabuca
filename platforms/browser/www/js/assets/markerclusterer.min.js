/*

 Copyright 2010 Google Inc. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var d;
function f(a,b,c){this.extend(f,google.maps.OverlayView);this.c=a;this.a=[];this.i=[];this.sizes=[53,56,66,78,90];this.m=[];this.M=!1;c=c||{};this.j=c.gridSize||60;this.s=c.minimumClusterSize||2;this.V=c.maxZoom||null;this.m=c.styles||[];this.ia=c.imagePath||this.ba;this.ha=c.imageExtension||this.aa;this.$=!0;void 0!=c.zoomOnClick&&(this.$=c.zoomOnClick);this.D=!1;void 0!=c.averageCenter&&(this.D=c.averageCenter);k(this);this.setMap(a);this.W=this.c.getZoom();var e=this;google.maps.event.addListener(this.c,"zoom_changed",
function(){var a=e.c.getZoom();e.W!=a&&(e.W=a,e.u())});google.maps.event.addListener(this.c,"idle",function(){e.l()});b&&b.length&&this.O(b,!1)}d=f.prototype;d.ba="../images/m";d.aa="png";d.extend=function(a,b){return function(a){for(var b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(a,[b])};d.onAdd=function(){this.M||(this.M=!0,l(this))};d.draw=function(){};function k(a){if(!a.m.length)for(var b=0,c;c=a.sizes[b];b++)a.m.push({url:a.ia+(b+1)+"."+a.ha,height:c,width:c})}
d.da=function(){for(var a=this.A(),b=new google.maps.LatLngBounds,c=0,e;e=a[c];c++)b.extend(e.getPosition());this.c.fitBounds(b)};d.K=function(){return this.m};d.A=function(){return this.a};d.ga=function(){return this.a.length};d.na=function(a){this.V=a};d.J=function(){return this.V};d.S=function(a,b){for(var c=0,e=a.length,g=e;0!==g;)g=parseInt(g/10,10),c++;c=Math.min(c,b);return{text:e,index:c}};d.la=function(a){this.S=a};d.T=function(){return this.S};
d.O=function(a,b){for(var c=0,e;e=a[c];c++)q(this,e);b||this.l()};function q(a,b){b.G=!1;b.draggable&&google.maps.event.addListener(b,"dragend",function(){b.G=!1;a.X()});a.a.push(b)}d.C=function(a,b){q(this,a);b||this.l()};function r(a,b){var c=-1;if(a.a.indexOf)c=a.a.indexOf(b);else for(var e=0,g;g=a.a[e];e++)if(g==b){c=e;break}if(-1==c)return!1;b.setMap(null);a.a.splice(c,1);return!0}d.ja=function(a,b){var c=r(this,a);return!b&&c?(this.u(),this.l(),!0):!1};
d.ka=function(a,b){for(var c=!1,e=0,g;g=a[e];e++)g=r(this,g),c=c||g;if(!b&&c)return this.u(),this.l(),!0};d.fa=function(){return this.i.length};d.getMap=function(){return this.c};d.setMap=function(a){this.c=a};d.U=function(){return this.j};d.ma=function(a){this.j=a};
d.I=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),e=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),c=b.fromLatLngToDivPixel(c);c.x+=this.j;c.y-=this.j;e=b.fromLatLngToDivPixel(e);e.x-=this.j;e.y+=this.j;c=b.fromDivPixelToLatLng(c);b=b.fromDivPixelToLatLng(e);a.extend(c);a.extend(b);return a};d.ca=function(){this.u(!0);this.a=[]};
d.u=function(a){for(var b=0,c;c=this.i[b];b++)c.remove();for(b=0;c=this.a[b];b++)c.G=!1,a&&c.setMap(null);this.i=[]};d.X=function(){var a=this.i.slice();this.i.length=0;this.u();this.l();window.setTimeout(function(){for(var b=0,c;c=a[b];b++)c.remove()},0)};d.l=function(){l(this)};
function l(a){if(a.M)for(var b=new google.maps.LatLngBounds(a.c.getBounds().getSouthWest(),a.c.getBounds().getNorthEast()),b=a.I(b),c=0,e;e=a.a[c];c++)if(!e.G&&b.contains(e.getPosition())){for(var g=a,m=e,v=4E4,n=null,w=0;e=g.i[w];w++){var h=e.getCenter();if(h){var p=m.getPosition();if(h&&p)var x=(p.lat()-h.lat())*Math.PI/180,y=(p.lng()-h.lng())*Math.PI/180,h=Math.sin(x/2)*Math.sin(x/2)+Math.cos(h.lat()*Math.PI/180)*Math.cos(p.lat()*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2),h=12742*Math.atan2(Math.sqrt(h),
Math.sqrt(1-h));else h=0;h<v&&(v=h,n=e)}}n&&n.R.contains(m.getPosition())?n.C(m):(e=new t(g),e.C(m),g.i.push(e))}}d.L=function(a){return a};d.oa=function(a){this.L=a;return!0};function t(a){this.o=a;this.c=a.getMap();this.j=a.U();this.s=a.s;this.D=a.D;this.f=null;this.a=[];this.R=null;this.v=new u(this,a.K())}d=t.prototype;
d.C=function(a){var b;a:if(this.a.indexOf)b=-1!=this.a.indexOf(a);else{b=0;for(var c;c=this.a[b];b++)if(c==a){b=!0;break a}b=!1}if(b)return!1;this.f?this.D&&(c=this.a.length+1,b=(this.f.lat()*(c-1)+a.getPosition().lat())/c,c=(this.f.lng()*(c-1)+a.getPosition().lng())/c,this.f=new google.maps.LatLng(b,c),z(this)):(this.f=a.getPosition(),z(this));a.G=!0;this.a.push(a);b=this.a.length;b<this.s&&a.getMap()!=this.c&&a.setMap(this.c);if(b==this.s)for(c=0;c<b;c++)this.a[c].setMap(null);b>=this.s&&a.setMap(null);
a=this.c.getZoom();if((b=this.o.J())&&a>b)for(a=0;b=this.a[a];a++)b.setMap(this.c);else this.a.length<this.s?A(this.v):(b=this.o.T()(this.a,this.o.K().length),this.v.setCenter(this.f),a=this.v,a.N=b,a.b&&(a.b.innerHTML=b.text),b=Math.max(0,a.N.index-1),b=Math.min(a.m.length-1,b),b=a.m[b],a.pa=b.url,a.h=b.height,a.B=b.width,a.Y=b.textColor,a.g=b.anchor,a.Z=b.textSize,a.P=b.backgroundPosition,a.F=b.iconAnchor,this.v.show());return!0};
d.getBounds=function(){for(var a=new google.maps.LatLngBounds(this.f,this.f),b=this.A(),c=0,e;e=b[c];c++)a.extend(e.getPosition());return a};d.remove=function(){this.v.remove();this.a.length=0;delete this.a};d.ea=function(){return this.a.length};d.A=function(){return this.a};d.getCenter=function(){return this.f};function z(a){var b=new google.maps.LatLngBounds(a.f,a.f);a.R=a.o.I(b)}d.getMap=function(){return this.c};
function u(a,b){a.o.extend(u,google.maps.OverlayView);this.m=b;this.w=a;this.f=null;this.c=a.getMap();this.N=this.b=null;this.H=!1;this.setMap(this.c)}d=u.prototype;
d.onAdd=function(){this.b=document.createElement("DIV");if(this.H){var a=B(this,this.f);this.b.style.cssText=C(this,a);this.b.innerHTML=this.N.text}this.getPanes().overlayMouseTarget.appendChild(this.b);var b=this,c=!1,e=!1;google.maps.event.addDomListener(this.b,"click",function(a){if(!c){var e=b.w.o;google.maps.event.trigger(e,"clusterclick",b.w,a);b.c.getZoom()>=e.J()&&1<b.w.a.length?e.L(b.w):e.$&&b.c.fitBounds(b.w.getBounds())}});google.maps.event.addDomListener(this.b,"mousedown",function(){c=
!1;e=!0});google.maps.event.addDomListener(this.b,"mouseup",function(){e=c=!1});google.maps.event.addDomListener(this.b,"mousemove",function(){e&&(c=!0)})};function B(a,b){var c=a.getProjection().fromLatLngToDivPixel(b);"object"===typeof a.F&&2===a.F.length?(c.x-=a.F[0],c.y-=a.F[1]):(c.x-=parseInt(a.B/2,10),c.y-=parseInt(a.h/2,10));return c}d.draw=function(){if(this.H){var a=B(this,this.f);this.b.style.top=a.y+"px";this.b.style.left=a.x+"px"}};
function A(a){a.b&&(a.b.style.display="none");a.H=!1}d.show=function(){if(this.b){var a=B(this,this.f);this.b.style.cssText=C(this,a);this.b.style.display=""}this.H=!0};d.remove=function(){this.setMap(null)};d.onRemove=function(){this.b&&this.b.parentNode&&(A(this),this.b.parentNode.removeChild(this.b),this.b=null)};d.setCenter=function(a){this.f=a};
function C(a,b){var c=[];c.push("background-image:url("+a.pa+");");c.push("background-position:"+(a.P?a.P:"0 0")+";");"object"===typeof a.g?("number"===typeof a.g[0]&&0<a.g[0]&&a.g[0]<a.h?c.push("height:"+(a.h-a.g[0])+"px; padding-top:"+a.g[0]+"px;"):"number"===typeof a.g[0]&&0>a.g[0]&&-a.g[0]<a.h?c.push("height:"+a.h+"px; line-height:"+(a.h+a.g[0])+"px;"):c.push("height:"+a.h+"px; line-height:"+a.h+"px;"),"number"===typeof a.g[1]&&0<a.g[1]&&a.g[1]<a.B?c.push("width:"+(a.B-a.g[1])+"px; padding-left:"+
a.g[1]+"px;"):c.push("width:"+a.B+"px; text-align:center;")):c.push("height:"+a.h+"px; line-height:"+a.h+"px; width:"+a.B+"px; text-align:center;");c.push("cursor:pointer; top:"+b.y+"px; left:"+b.x+"px; color:"+(a.Y?a.Y:"black")+"; position:absolute; font-size:"+(a.Z?a.Z:11)+"px; font-family:Arial,sans-serif; font-weight:bold");return c.join("")}window.MarkerClusterer=f;f.prototype.addMarker=f.prototype.C;f.prototype.addMarkers=f.prototype.O;f.prototype.clearMarkers=f.prototype.ca;
f.prototype.fitMapToMarkers=f.prototype.da;f.prototype.getCalculator=f.prototype.T;f.prototype.getGridSize=f.prototype.U;f.prototype.getExtendedBounds=f.prototype.I;f.prototype.getMap=f.prototype.getMap;f.prototype.getMarkers=f.prototype.A;f.prototype.getMaxZoom=f.prototype.J;f.prototype.getStyles=f.prototype.K;f.prototype.getTotalClusters=f.prototype.fa;f.prototype.getTotalMarkers=f.prototype.ga;f.prototype.redraw=f.prototype.l;f.prototype.removeMarker=f.prototype.ja;f.prototype.removeMarkers=f.prototype.ka;
f.prototype.resetViewport=f.prototype.u;f.prototype.repaint=f.prototype.X;f.prototype.setCalculator=f.prototype.la;f.prototype.setGridSize=f.prototype.ma;f.prototype.setMaxZoom=f.prototype.na;f.prototype.onAdd=f.prototype.onAdd;f.prototype.draw=f.prototype.draw;f.prototype.onClickZoom=f.prototype.L;f.prototype.setOnClickZoom=f.prototype.oa;t.prototype.getCenter=t.prototype.getCenter;t.prototype.getSize=t.prototype.ea;t.prototype.getMarkers=t.prototype.A;u.prototype.onAdd=u.prototype.onAdd;
u.prototype.draw=u.prototype.draw;u.prototype.onRemove=u.prototype.onRemove;
